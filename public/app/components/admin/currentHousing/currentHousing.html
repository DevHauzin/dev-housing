<side-bar-nav></side-bar-nav>
<admin-mobile-side-bar-nav></admin-mobile-side-bar-nav>
<user-info></user-info>

<div class="main-wrapper">

    <div class="current_housing_search_container">
        <p class="bold gray">Current Housing <span ng-if="cohortFilter">&mdash; {{cohortFilter.senior}} {{cohortFilter.junior}}</span>
        <select ng-model="cohortFilter" ng-options="cohort as cohort.name for cohort in allCohorts"></select></p>
        <!-- <input class="housing-search-bar" placeholder="Campus/Room/Notes" ng-model="query" />
        <select ng-model="queryBy" />
        <option value="" selected>Filter By</option>
        <option value="unitNumber">Unit Number</option>
        <option value="campus">Campus</option>
        <option value="propertyName">Property Name</option> -->
        <!-- <option value="allCurrentOccupants">Occupant</option> -->
        <!-- </select> -->

    </div>

    <div class="cards_list_container" ng-if="cohortFilter">

        <div class="current_housing_cards_container">
            <div class="current_housing_repeat_cards white_background_color" ng-repeat="unit in currentHousing | filter: {campus: cohortFilter.name}">
                <div class="current_housing_cards_head">
                    <div>
                        {{unit.campus}} &mdash; {{unit.unitNumber}}
                    </div>
                    <div class="header_address">
                      {{unit.propertyName}} {{unit.address.street1}}
                    </div>
                </div>
                  {{unit.currentBedrooms.roomNumber}}<br>

                    <div ng-repeat="bedroom in unit.currentBedrooms">
                        Room: {{bedroom.roomNumber}} - Max occupants: {{bedroom.maxOccupants}}
                        <br> Add occupant:
                        <div ng-hide="bedroom.maxOccupants <= bedroom.currentOccupants.length">
                          <select ng-model="bedroom.user" ng-options="user.firstName + ' ' + user.lastName group by user.gender for user in needHousing | filter: filterFutureCohorts | filter: {campus: cohortFilter.name}">
                          </select>
                          <button type="button" name="button" ng-click="saveUnit(bedroom, bedroom.user)">save user</button>
                        </div>
                        <div ng-repeat="user in bedroom.currentOccupants">
                            Occupant:
                            {{user.firstName}}
                            {{user.lastName}}
                            <i ng-click="removeUser(bedroom, user)" class="fa fa-times"></i>
                        </div>
                    </div>
                    <span class="bold">Admin Notes:</span>
                    {{unit.adminNotes}}<br>
                </p>
            </div>
        </div>

        <div class="wants_housing_container current_housing_repeat_cards white_background_color">
            <div class="requested_housing_cards_head">
                <div>
                    <p>Requested Housing</p>
                </div>
            </div>
            <div class="wants_housing_list">
                <p class="bold wants_housing_subheader">Men &#9794;</p>
                <p ng-click="showDetails = !showDetails" ng-repeat="user in needHousing | filter: {genderLetter: 'M'} | filter: {singleRoom: {wantsSingleRoom: false}} | filter: filterFutureCohorts | filter: {campus: cohortFilter.name}">
                    {{user.firstName}} {{user.lastName}} &mdash; {{user.age}}
                    <span ng-show="showDetails"><br>&nbsp;&nbsp;&nbsp;&nbsp;{{user.role}} &mdash; <span ng-repeat="cohort in user.cohortID">{{cohort}} </span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;{{user.currentAddress.city}}, {{user.currentAddress.state}}</span>
                </p>
                <br>
                <p class="bold">Requested Private Room</p>
                <p ng-click="showDetails = !showDetails" ng-repeat="user in needHousing | filter: {genderLetter: 'M'} | filter: {singleRoom: {wantsSingleRoom: true}} | filter: filterFutureCohorts | filter: {campus: cohortFilter.name}">
                  {{user.firstName}} {{user.lastName}} &mdash; {{user.age}}
                  <span ng-show="showDetails"><br>&nbsp;&nbsp;&nbsp;&nbsp;{{user.role}} &mdash; <span ng-repeat="cohort in user.cohortID">{{cohort}} </span><br>
                  &nbsp;&nbsp;&nbsp;&nbsp;{{user.currentAddress.city}}, {{user.currentAddress.state}}</span>
              </p>
                </p>
                <hr>
                <br>
                <p class="bold wants_housing_subheader">Women &#9792;</p>
                <p ng-click="showDetails = !showDetails" ng-repeat="user in needHousing | filter: {genderLetter: 'F'} | filter: {singleRoom: {wantsSingleRoom: false}} | filter: filterFutureCohorts | filter: {campus: cohortFilter.name}">
                  {{user.firstName}} {{user.lastName}} &mdash; {{user.age}}
                  <span ng-show="showDetails"><br>&nbsp;&nbsp;&nbsp;&nbsp;{{user.role}} &mdash; <span ng-repeat="cohort in user.cohortID">{{cohort}} </span><br>
                  &nbsp;&nbsp;&nbsp;&nbsp;{{user.currentAddress.city}}, {{user.currentAddress.state}}</span>
              </p>
                </p>
                <br>
                <p class="bold">Requested Private Room</p>
                <p ng-click="showDetails = !showDetails" ng-repeat="user in needHousing | filter: {genderLetter: 'F'} | filter: {singleRoom: {wantsSingleRoom: true}} | filter: filterFutureCohorts | filter: {campus: cohortFilter.name}">
                  {{user.firstName}} {{user.lastName}} &mdash; {{user.age}}
                  <span ng-show="showDetails"><br>&nbsp;&nbsp;&nbsp;&nbsp;{{user.role}} &mdash; <span ng-repeat="cohort in user.cohortID">{{cohort}} </span><br>
                  &nbsp;&nbsp;&nbsp;&nbsp;{{user.currentAddress.city}}, {{user.currentAddress.state}}</span>
              </p>
                </p>
            </div>
        </div>

    </div>

</div>
<!--main-wrapper closing div -->
